<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Preloader — FORMA</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=DM+Mono:wght@300;400&family=Syne:wght@700;800&display=swap');
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body { background: #06060f; overflow: hidden; width: 100vw; height: 100vh; display: flex; align-items: center; justify-content: center; }

  .loader {
    display: flex; flex-direction: column; align-items: center; gap: 40px;
    position: relative; z-index: 1;
  }

  /* Ring stack */
  .rings { position: relative; width: 120px; height: 120px; }
  .ring-item {
    position: absolute; top: 50%; left: 50%;
    border-radius: 50%;
    border: 2px solid transparent;
    transform: translate(-50%, -50%);
  }
  .ring-item:nth-child(1) {
    width: 120px; height: 120px;
    border-top-color: #7c6af7;
    border-right-color: rgba(124,106,247,0.2);
    animation: spinR 1.2s cubic-bezier(0.6,0.1,0.4,0.9) infinite;
  }
  .ring-item:nth-child(2) {
    width: 90px; height: 90px;
    border-top-color: #f76af0;
    border-left-color: rgba(247,106,240,0.2);
    animation: spinL 1.6s cubic-bezier(0.6,0.1,0.4,0.9) infinite;
  }
  .ring-item:nth-child(3) {
    width: 60px; height: 60px;
    border-top-color: #6af7c8;
    border-bottom-color: rgba(106,247,200,0.2);
    animation: spinR 0.9s cubic-bezier(0.6,0.1,0.4,0.9) infinite;
  }
  .dot-center {
    position: absolute; top: 50%; left: 50%;
    width: 8px; height: 8px;
    margin: -4px 0 0 -4px;
    background: #fff;
    border-radius: 50%;
    box-shadow: 0 0 12px 4px rgba(200,180,255,0.6);
    animation: pulse 1.5s ease-in-out infinite;
  }
  @keyframes spinR { from { transform: translate(-50%,-50%) rotate(0deg); } to { transform: translate(-50%,-50%) rotate(360deg); } }
  @keyframes spinL { from { transform: translate(-50%,-50%) rotate(0deg); } to { transform: translate(-50%,-50%) rotate(-360deg); } }
  @keyframes pulse { 0%,100% { opacity:0.6; transform:translate(-50%,-50%) scale(1); } 50% { opacity:1; transform:translate(-50%,-50%) scale(1.4); } }

  /* Progress bar */
  .progress-wrap {
    width: 240px;
    display: flex; flex-direction: column; gap: 10px;
  }
  .progress-track {
    width: 100%; height: 2px;
    background: rgba(255,255,255,0.08);
    border-radius: 2px;
    overflow: hidden;
  }
  .progress-fill {
    height: 100%;
    background: linear-gradient(90deg, #7c6af7, #f76af0, #6af7c8);
    border-radius: 2px;
    width: 0%;
    transition: width 0.1s linear;
    box-shadow: 0 0 8px rgba(200,180,255,0.5);
  }
  .progress-labels {
    display: flex; justify-content: space-between; align-items: center;
  }
  .progress-pct {
    font-family: 'DM Mono', monospace; font-size: 11px;
    color: rgba(255,255,255,0.5); letter-spacing: 0.1em;
  }
  .progress-status {
    font-family: 'DM Mono', monospace; font-size: 10px;
    color: rgba(255,255,255,0.3); letter-spacing: 0.08em;
    text-transform: uppercase;
  }

  /* Logo */
  .logo {
    font-family: 'Syne', sans-serif; font-weight: 800;
    font-size: 28px; letter-spacing: 0.2em;
    background: linear-gradient(135deg, #fff, #a090ff);
    -webkit-background-clip: text; -webkit-text-fill-color: transparent;
    text-transform: uppercase;
  }

  /* Particles BG */
  canvas { position: fixed; inset: 0; z-index: 0; pointer-events: none; }

  /* Done state */
  .done-overlay {
    position: fixed; inset: 0;
    background: #06060f;
    opacity: 0; pointer-events: none;
    transition: opacity 0.6s ease;
    z-index: 10;
    display: flex; align-items: center; justify-content: center;
    font-family: 'Syne', sans-serif; font-weight: 700; font-size: 24px;
    letter-spacing: 0.3em; color: rgba(255,255,255,0.6);
    text-transform: uppercase;
  }
  .label { position: fixed; bottom: 24px; left: 24px; font-family: 'Courier New', monospace; font-size: 11px; letter-spacing: 0.15em; color: rgba(255,255,255,0.2); text-transform: uppercase; z-index: 2; }
</style>
</head>
<body>
<canvas id="bg"></canvas>
<div class="loader">
  <div class="logo">Forma</div>
  <div class="rings">
    <div class="ring-item"></div>
    <div class="ring-item"></div>
    <div class="ring-item"></div>
    <div class="dot-center"></div>
  </div>
  <div class="progress-wrap">
    <div class="progress-track"><div class="progress-fill" id="fill"></div></div>
    <div class="progress-labels">
      <div class="progress-pct" id="pct">0%</div>
      <div class="progress-status" id="status">Initializing…</div>
    </div>
  </div>
</div>
<div class="done-overlay" id="done">Ready</div>
<div class="label">Preloader · Auto-loop</div>

<script>
// BG particles
const canvas = document.getElementById('bg');
const ctx = canvas.getContext('2d');
canvas.width = window.innerWidth; canvas.height = window.innerHeight;
window.addEventListener('resize', () => { canvas.width = window.innerWidth; canvas.height = window.innerHeight; });
const dots = Array.from({length:50}, () => ({ x: Math.random()*window.innerWidth, y: Math.random()*window.innerHeight, r: Math.random()*1.2+0.3, ph: Math.random()*Math.PI*2, sp: Math.random()*0.008+0.003 }));
(function loop() {
  ctx.clearRect(0,0,canvas.width,canvas.height);
  dots.forEach(d => {
    d.ph += d.sp;
    ctx.beginPath(); ctx.arc(d.x, d.y, d.r, 0, Math.PI*2);
    ctx.fillStyle = `rgba(150,140,255,${0.1+Math.sin(d.ph)*0.1})`;
    ctx.fill();
  });
  requestAnimationFrame(loop);
})();

const fill = document.getElementById('fill');
const pct = document.getElementById('pct');
const status = document.getElementById('status');
const done = document.getElementById('done');

const steps = [
  { at: 0,   label: 'Initializing…' },
  { at: 15,  label: 'Loading assets…' },
  { at: 35,  label: 'Compiling shaders…' },
  { at: 55,  label: 'Building scene…' },
  { at: 72,  label: 'Optimizing…' },
  { at: 88,  label: 'Almost there…' },
  { at: 100, label: 'Done.' },
];

let progress = 0;
let stepIdx = 0;
let direction = 1;
let paused = false;

function animate() {
  if (!paused) {
    progress += direction * 0.4;
    if (progress >= 100) {
      progress = 100;
      fill.style.width = '100%';
      pct.textContent = '100%';
      status.textContent = 'Done.';
      paused = true;
      setTimeout(() => {
        done.style.opacity = '1';
        setTimeout(() => {
          done.style.opacity = '0';
          setTimeout(() => { progress = 0; paused = false; stepIdx = 0; }, 800);
        }, 1000);
      }, 300);
      return requestAnimationFrame(animate);
    }
    fill.style.width = progress + '%';
    pct.textContent = Math.floor(progress) + '%';
    for (let i = steps.length-1; i >= 0; i--) {
      if (progress >= steps[i].at) { status.textContent = steps[i].label; break; }
    }
  }
  requestAnimationFrame(animate);
}
animate();
</script>
</body>
</html>
